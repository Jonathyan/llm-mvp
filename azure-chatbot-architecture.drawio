<mxfile host="app.diagrams.net" modified="2025-07-31T20:00:00.000Z" agent="5.0" etag="abc123" version="24.7.7" type="device">
  <diagram name="Azure Secure Chatbot Architecture" id="azure-chatbot">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="Azure Secure Chatbot Infrastructure" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="400" height="30" as="geometry" />
        </mxCell>
        
        <!-- Internet Cloud -->
        <mxCell id="internet" value="Internet" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#e1f5fe;strokeColor=#01579b;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="100" width="120" height="80" as="geometry" />
        </mxCell>
        
        <!-- End User -->
        <mxCell id="user" value="End User" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;fillColor=#ffab91;strokeColor=#d84315;" vertex="1" parent="1">
          <mxGeometry x="95" y="250" width="30" height="60" as="geometry" />
        </mxCell>
        
        <!-- Azure Resource Group Container -->
        <mxCell id="azure_rg" value="Azure Resource Group: enterprise-llm-mvp" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=#7b1fa2;strokeWidth=3;fontSize=14;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="250" y="80" width="850" height="650" as="geometry" />
        </mxCell>
        
        <!-- Virtual Network Container -->
        <mxCell id="vnet" value="Virtual Network (VNet): vnet-main&#xa;Address Space: 10.0.0.0/16" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#388e3c;strokeWidth=2;fontSize=12;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="280" y="120" width="790" height="450" as="geometry" />
        </mxCell>
        
        <!-- Public Subnet -->
        <mxCell id="public_subnet" value="Public Subnet&#xa;10.0.1.0/24" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#f57c00;strokeWidth=2;fontSize=11;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="310" y="160" width="340" height="180" as="geometry" />
        </mxCell>
        
        <!-- Private Subnet -->
        <mxCell id="private_subnet" value="Private Subnet&#xa;10.0.2.0/24" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f1f8e9;strokeColor=#689f38;strokeWidth=2;fontSize=11;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="700" y="160" width="340" height="180" as="geometry" />
        </mxCell>
        
        <!-- VM with components -->
        <mxCell id="vm" value="Linux VM&#xa;vm-webserver&#xa;Standard_B1s" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#1976d2;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="330" y="200" width="100" height="60" as="geometry" />
        </mxCell>
        
        <!-- Managed Identity -->
        <mxCell id="managed_identity" value="System-Assigned&#xa;Managed Identity" style="ellipse;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#388e3c;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="450" y="200" width="80" height="50" as="geometry" />
        </mxCell>
        
        <!-- Streamlit App -->
        <mxCell id="streamlit_app" value="Streamlit&#xa;Chatbot App&#xa;Port 8080" style="hexagon;whiteSpace=wrap;html=1;fillColor=#f8bbd9;strokeColor=#ad1457;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="550" y="200" width="80" height="50" as="geometry" />
        </mxCell>
        
        <!-- Public IP -->
        <mxCell id="public_ip" value="Public IP&#xa;pip-web-vm" style="ellipse;whiteSpace=wrap;html=1;fillColor=#ffecb3;strokeColor=#ff8f00;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="330" y="280" width="70" height="40" as="geometry" />
        </mxCell>
        
        <!-- NSG -->
        <mxCell id="nsg" value="Network Security Group&#xa;nsg-web&#xa;SSH (22) + HTTP (8080)" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffcdd2;strokeColor=#d32f2f;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="450" y="270" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Private Endpoints -->
        <mxCell id="pe_keyvault" value="Private Endpoint&#xa;Key Vault&#xa;10.0.2.4" style="ellipse;whiteSpace=wrap;html=1;fillColor=#dcedc8;strokeColor=#689f38;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="720" y="200" width="80" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="pe_openai" value="Private Endpoint&#xa;OpenAI&#xa;10.0.2.5" style="ellipse;whiteSpace=wrap;html=1;fillColor=#dcedc8;strokeColor=#689f38;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="940" y="200" width="80" height="50" as="geometry" />
        </mxCell>
        
        <!-- DNS Zones -->
        <mxCell id="dns_zones" value="Private DNS Zones" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e0f2f1;strokeColor=#00695c;fontSize=11;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="310" y="380" width="340" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="dns_kv" value="privatelink.vaultcore.azure.net" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b2dfdb;strokeColor=#00695c;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="320" y="410" width="140" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="dns_oai" value="privatelink.openai.azure.com" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b2dfdb;strokeColor=#00695c;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="480" y="410" width="140" height="30" as="geometry" />
        </mxCell>
        
        <!-- Backend Services -->
        <mxCell id="backend_services" value="Backend Services" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=#7b1fa2;strokeWidth=2;fontSize=12;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="280" y="600" width="790" height="120" as="geometry" />
        </mxCell>
        
        <!-- Key Vault -->
        <mxCell id="keyvault" value="Azure Key Vault&#xa;kv-{unique}&#xa;Standard Tier" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1bee7;strokeColor=#7b1fa2;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="320" y="640" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Key Vault Secret -->
        <mxCell id="secret" value="Secret:&#xa;OpenAI-API-Key" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8bbd9;strokeColor=#ad1457;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="460" y="650" width="80" height="40" as="geometry" />
        </mxCell>
        
        <!-- OpenAI Service -->
        <mxCell id="openai" value="Azure OpenAI Service&#xa;oai-{unique}&#xa;S0 Tier" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c5e1a5;strokeColor=#689f38;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="700" y="640" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- OpenAI Model -->
        <mxCell id="model" value="GPT-3.5 Turbo&#xa;Deployment" style="ellipse;whiteSpace=wrap;html=1;fillColor=#aed581;strokeColor=#689f38;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="840" y="650" width="80" height="40" as="geometry" />
        </mxCell>
        
        <!-- Connection flows -->
        <!-- User to Internet -->
        <mxCell id="conn1" value="HTTPS Request" style="endArrow=classic;html=1;rounded=0;strokeColor=#d32f2f;strokeWidth=2;" edge="1" parent="1" source="user" target="internet">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="400" as="sourcePoint" />
            <mxPoint x="450" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Internet to VM -->
        <mxCell id="conn2" value="Port 8080" style="endArrow=classic;html=1;rounded=0;strokeColor=#d32f2f;strokeWidth=2;" edge="1" parent="1" source="internet" target="public_ip">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="400" as="sourcePoint" />
            <mxPoint x="450" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- VM to Managed Identity -->
        <mxCell id="conn3" value="Uses Identity" style="endArrow=classic;html=1;rounded=0;strokeColor=#388e3c;" edge="1" parent="1" source="vm" target="managed_identity">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="400" as="sourcePoint" />
            <mxPoint x="450" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- VM to Streamlit -->
        <mxCell id="conn4" value="Hosts App" style="endArrow=classic;html=1;rounded=0;strokeColor=#ad1457;" edge="1" parent="1" source="vm" target="streamlit_app">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="400" as="sourcePoint" />
            <mxPoint x="450" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Managed Identity to Key Vault PE -->
        <mxCell id="conn5" value="Get Secrets&#xa;(Private Network)" style="endArrow=classic;html=1;rounded=0;strokeColor=#7b1fa2;strokeWidth=2;dashed=1;" edge="1" parent="1" source="managed_identity" target="pe_keyvault">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="400" as="sourcePoint" />
            <mxPoint x="450" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Streamlit to OpenAI PE -->
        <mxCell id="conn6" value="AI Requests&#xa;(Private Network)" style="endArrow=classic;html=1;rounded=0;strokeColor=#4caf50;strokeWidth=2;dashed=1;" edge="1" parent="1" source="streamlit_app" target="pe_openai">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="400" as="sourcePoint" />
            <mxPoint x="450" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- PE to Backend Services -->
        <mxCell id="conn7" value="Private Link" style="endArrow=classic;html=1;rounded=0;strokeColor=#7b1fa2;strokeWidth=2;" edge="1" parent="1" source="pe_keyvault" target="keyvault">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="400" as="sourcePoint" />
            <mxPoint x="450" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="conn8" value="Private Link" style="endArrow=classic;html=1;rounded=0;strokeColor=#4caf50;strokeWidth=2;" edge="1" parent="1" source="pe_openai" target="openai">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="400" as="sourcePoint" />
            <mxPoint x="450" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- DNS Resolution -->
        <mxCell id="conn9" value="DNS Resolution" style="endArrow=classic;html=1;rounded=0;strokeColor=#00acc1;dashed=1;" edge="1" parent="1" source="dns_kv" target="pe_keyvault">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="400" as="sourcePoint" />
            <mxPoint x="450" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="conn10" value="DNS Resolution" style="endArrow=classic;html=1;rounded=0;strokeColor=#00acc1;dashed=1;" edge="1" parent="1" source="dns_oai" target="pe_openai">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="400" as="sourcePoint" />
            <mxPoint x="450" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Key Vault to Secret -->
        <mxCell id="conn11" value="Contains" style="endArrow=classic;html=1;rounded=0;strokeColor=#7b1fa2;" edge="1" parent="1" source="keyvault" target="secret">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="400" as="sourcePoint" />
            <mxPoint x="450" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- OpenAI to Model -->
        <mxCell id="conn12" value="Hosts" style="endArrow=classic;html=1;rounded=0;strokeColor=#689f38;" edge="1" parent="1" source="openai" target="model">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="400" as="sourcePoint" />
            <mxPoint x="450" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Legend -->
        <mxCell id="legend" value="Security Features:&#xa;• No public access to backend services&#xa;• Managed Identity (no passwords)&#xa;• Private endpoints only&#xa;• Network segmentation&#xa;• Firewall rules (NSG)&#xa;&#xa;Data Flow:&#xa;1. User → Internet → VM&#xa;2. VM → Private Endpoint → Key Vault&#xa;3. VM → Private Endpoint → OpenAI&#xa;4. All backend traffic stays private" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff9c4;strokeColor=#f57f17;fontSize=10;align=left;verticalAlign=top;spacingTop=10;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="400" width="180" height="200" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>