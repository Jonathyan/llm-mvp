<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2025-07-31T10:00:00.000Z" agent="5.0" etag="abc123" version="24.7.6" type="device">
  <diagram name="Azure Secure Chatbot" id="azure-chatbot">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="Azure Secure Chatbot Infrastructure" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="384" y="20" width="400" height="40" as="geometry" />
        </mxCell>
        
        <!-- Internet Cloud -->
        <mxCell id="internet" value="Internet" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#01579B;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="490" y="80" width="140" height="80" as="geometry" />
        </mxCell>
        
        <!-- User -->
        <mxCell id="user" value="End User" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;fillColor=#FFAB91;strokeColor=#BF360C;" vertex="1" parent="1">
          <mxGeometry x="180" y="90" width="30" height="60" as="geometry" />
        </mxCell>
        
        <!-- Resource Group Container -->
        <mxCell id="resource_group" value="Resource Group: JouwResourceGroep" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#1976D2;strokeWidth=3;verticalAlign=top;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="200" width="1000" height="580" as="geometry" />
        </mxCell>
        
        <!-- Virtual Network Container -->
        <mxCell id="vnet" value="Virtual Network (VNet)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;strokeWidth=2;verticalAlign=top;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="100" y="240" width="620" height="380" as="geometry" />
        </mxCell>
        
        <!-- Public Subnet -->
        <mxCell id="public_subnet" value="Public Subnet&#xa;10.0.1.0/24" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;verticalAlign=top;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="270" width="280" height="180" as="geometry" />
        </mxCell>
        
        <!-- Private Subnet -->
        <mxCell id="private_subnet" value="Private Subnet&#xa;10.0.2.0/24" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F1F8E9;strokeColor=#689F38;verticalAlign=top;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="420" y="270" width="280" height="180" as="geometry" />
        </mxCell>
        
        <!-- VM -->
        <mxCell id="vm" value="Linux VM (Ubuntu)&#xa;vm-webserver" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="140" y="310" width="100" height="60" as="geometry" />
        </mxCell>
        
        <!-- Public IP -->
        <mxCell id="public_ip" value="Public IP&#xa;pip-web-vm" style="ellipse;whiteSpace=wrap;html=1;fillColor=#FFECB3;strokeColor=#F57C00;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="260" y="310" width="70" height="40" as="geometry" />
        </mxCell>
        
        <!-- Managed Identity -->
        <mxCell id="managed_identity" value="System-Assigned&#xa;Managed Identity" style="shape=umlActor;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#388E3C;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="140" y="380" width="40" height="50" as="geometry" />
        </mxCell>
        
        <!-- Streamlit App -->
        <mxCell id="streamlit_app" value="Streamlit&#xa;Web Application" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fillColor=#F8BBD9;strokeColor=#AD1457;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="200" y="380" width="80" height="50" as="geometry" />
        </mxCell>
        
        <!-- NSG -->
        <mxCell id="nsg" value="Network Security Group&#xa;Firewall Rules" style="rhombus;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#D32F2F;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="300" y="380" width="80" height="60" as="geometry" />
        </mxCell>
        
        <!-- Private Endpoints -->
        <mxCell id="pe_keyvault" value="Private Endpoint&#xa;Key Vault" style="ellipse;whiteSpace=wrap;html=1;fillColor=#DCEDC8;strokeColor=#689F38;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="440" y="310" width="80" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="pe_openai" value="Private Endpoint&#xa;OpenAI" style="ellipse;whiteSpace=wrap;html=1;fillColor=#DCEDC8;strokeColor=#689F38;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="440" y="380" width="80" height="50" as="geometry" />
        </mxCell>
        
        <!-- DNS Zones -->
        <mxCell id="dns_zones" value="Private DNS Zones" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F2F1;strokeColor=#00695C;verticalAlign=top;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="470" width="280" height="130" as="geometry" />
        </mxCell>
        
        <mxCell id="dns_kv" value="privatelink.vaultcore.azure.net" style="shape=note;whiteSpace=wrap;html=1;fillColor=#B2DFDB;strokeColor=#00695C;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="140" y="500" width="100" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="dns_oai" value="privatelink.openai.azure.com" style="shape=note;whiteSpace=wrap;html=1;fillColor=#B2DFDB;strokeColor=#00695C;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="260" y="500" width="100" height="40" as="geometry" />
        </mxCell>
        
        <!-- Backend Services Container -->
        <mxCell id="backend_services" value="Backend Services" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;strokeWidth=2;verticalAlign=top;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="750" y="240" width="310" height="380" as="geometry" />
        </mxCell>
        
        <!-- Key Vault -->
        <mxCell id="keyvault" value="Azure Key Vault&#xa;kv-{unique}" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#E1BEE7;strokeColor=#7B1FA2;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="780" y="280" width="100" height="80" as="geometry" />
        </mxCell>
        
        <!-- Secret -->
        <mxCell id="secret" value="Secret:&#xa;OpenAI-API-Key" style="shape=note;whiteSpace=wrap;html=1;fillColor=#F8BBD9;strokeColor=#AD1457;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="900" y="300" width="80" height="40" as="geometry" />
        </mxCell>
        
        <!-- OpenAI Service -->
        <mxCell id="openai" value="Azure OpenAI Service&#xa;oai-{unique}" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fillColor=#C5E1A5;strokeColor=#558B2F;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="780" y="420" width="120" height="80" as="geometry" />
        </mxCell>
        
        <!-- GPT Model -->
        <mxCell id="model" value="GPT-3.5 Turbo&#xa;Deployment" style="ellipse;whiteSpace=wrap;html=1;fillColor=#AED581;strokeColor=#558B2F;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="920" y="440" width="80" height="40" as="geometry" />
        </mxCell>
        
        <!-- Security Features Box -->
        <mxCell id="security_box" value="Security Features:&#xa;• No public access to backend services&#xa;• Managed Identity (no passwords)&#xa;• Private endpoints only&#xa;• Network segmentation&#xa;• Firewall rules (NSG)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;align=left;verticalAlign=top;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="100" y="640" width="250" height="100" as="geometry" />
        </mxCell>
        
        <!-- Data Flow Box -->
        <mxCell id="dataflow_box" value="Data Flow:&#xa;1. User → Internet → VM&#xa;2. VM → Private Endpoint → Key Vault&#xa;3. VM → Private Endpoint → OpenAI&#xa;4. All backend traffic stays private" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;align=left;verticalAlign=top;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="400" y="640" width="280" height="100" as="geometry" />
        </mxCell>
        
        <!-- Connections -->
        <!-- User to Internet -->
        <mxCell id="conn1" value="HTTPS Request" style="endArrow=classic;html=1;rounded=0;strokeColor=#D32F2F;strokeWidth=2;fontSize=10;" edge="1" parent="1" source="user" target="internet">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="220" y="120" as="sourcePoint" />
            <mxPoint x="270" y="70" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Internet to VM -->
        <mxCell id="conn2" value="Port 80/443" style="endArrow=classic;html=1;rounded=0;strokeColor=#D32F2F;strokeWidth=2;fontSize=10;" edge="1" parent="1" source="internet" target="public_ip">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="520" y="160" as="sourcePoint" />
            <mxPoint x="300" y="310" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- NSG to VM -->
        <mxCell id="conn3" value="Allow HTTP/SSH" style="endArrow=classic;html=1;rounded=0;strokeColor=#388E3C;fontSize=10;" edge="1" parent="1" source="nsg" target="vm">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="300" y="400" as="sourcePoint" />
            <mxPoint x="240" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- VM to Managed Identity -->
        <mxCell id="conn4" value="Uses Identity" style="endArrow=classic;html=1;rounded=0;strokeColor=#1976D2;fontSize=10;" edge="1" parent="1" source="streamlit_app" target="managed_identity">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="400" as="sourcePoint" />
            <mxPoint x="180" y="390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Managed Identity to Key Vault PE -->
        <mxCell id="conn5" value="Get Secrets&#xa;(Private Network)" style="endArrow=classic;html=1;rounded=0;strokeColor=#7B1FA2;strokeWidth=2;dashed=1;fontSize=10;" edge="1" parent="1" source="managed_identity" target="pe_keyvault">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="180" y="400" as="sourcePoint" />
            <mxPoint x="440" y="340" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Streamlit to OpenAI PE -->
        <mxCell id="conn6" value="AI Requests&#xa;(Private Network)" style="endArrow=classic;html=1;rounded=0;strokeColor=#4CAF50;strokeWidth=2;dashed=1;fontSize=10;" edge="1" parent="1" source="streamlit_app" target="pe_openai">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="280" y="405" as="sourcePoint" />
            <mxPoint x="440" y="405" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- PE to Key Vault -->
        <mxCell id="conn7" value="Private Link" style="endArrow=classic;html=1;rounded=0;strokeColor=#7B1FA2;strokeWidth=2;fontSize=10;" edge="1" parent="1" source="pe_keyvault" target="keyvault">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="520" y="335" as="sourcePoint" />
            <mxPoint x="780" y="320" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- PE to OpenAI -->
        <mxCell id="conn8" value="Private Link" style="endArrow=classic;html=1;rounded=0;strokeColor=#4CAF50;strokeWidth=2;fontSize=10;" edge="1" parent="1" source="pe_openai" target="openai">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="520" y="405" as="sourcePoint" />
            <mxPoint x="780" y="460" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- DNS Resolution -->
        <mxCell id="conn9" value="DNS Resolution" style="endArrow=classic;html=1;rounded=0;strokeColor=#00ACC1;dashed=1;fontSize=10;" edge="1" parent="1" source="dns_kv" target="pe_keyvault">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="240" y="500" as="sourcePoint" />
            <mxPoint x="440" y="360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="conn10" value="DNS Resolution" style="endArrow=classic;html=1;rounded=0;strokeColor=#00ACC1;dashed=1;fontSize=10;" edge="1" parent="1" source="dns_oai" target="pe_openai">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="520" as="sourcePoint" />
            <mxPoint x="440" y="430" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Key Vault to Secret -->
        <mxCell id="conn11" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#7B1FA2;" edge="1" parent="1" source="keyvault" target="secret">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="880" y="320" as="sourcePoint" />
            <mxPoint x="900" y="320" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- OpenAI to Model -->
        <mxCell id="conn12" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#558B2F;" edge="1" parent="1" source="openai" target="model">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="900" y="460" as="sourcePoint" />
            <mxPoint x="920" y="460" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>